<!DOCTYPE html><html lang=en-GB><head><meta name=viewport content="width=device-width, initial-scale=1"><meta name=keywords content=""><meta name=no-email-collection content="/privacy.txt"><meta name=twitter:card content=summary_large_image><meta property=og:title content="Advent of Code 2024 - Day 3 • Greg Daynes"><meta property="og:description" name=description content="The website and home of Gregory Daynes. Find links to projects, notebooks, and resume."><meta property="og:image" content="data:;base64,iVBORw0KGgo="><title>Advent of Code 2024 - Day 3 • Greg Daynes</title><link rel=me href="//mastodon.social/@gregdaynes"><link rel=author href="/humans.txt"><link rel=icon href="data:;base64,iVBORw0KGgo="><link type="application/atom+xml" rel=alternate href="/feed.xml"><style>:root{--ratio: 1.5;--s-3: calc(var(--s-2) / var(--ratio));--s-2: calc(var(--s-1) / var(--ratio));--s-1: calc(var(--s0) / var(--ratio));--s0: 1rem;--s1: calc(var(--s0) * var(--ratio));--_color-type-primary: black;--_color-type-secondary: silver;--_color-type-highlight: magenta;--_color-background-primary: white;--_color-background-secondary: lightgray;--_color-background-code: ghostwhite;--_color-link-normal: blue;--_color-link-hover: firebrick;--_color-link-active: cyan;--_color-link-visited: blue;--_color-link-current: firebrick}@media(prefers-color-scheme: dark){:root{--_color-type-primary: white;--_color-background-primary: black;--_color-link-normal: dodgerblue;--_color-link-hover: magenta;--_color-link-active: cyan;--_color-link-visited: dodgerblue;--_color-link-current: magenta;--_color-background-code: color-mix(in srgb, slategray 20%, transparent)}}:root{line-height:1.5;font-family:sans-serif;font-size:clamp(1.1rem,1.5vw,1.3rem);font-synthesis:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none}:is(*,*:visited):focus{--bg: var(--_color-link-normal);outline:none;box-shadow:0 0 0 .25rem var(--bg);background:var(--bg);color:var(--_color-background-primary)}body{background-color:var(--_color-background-primary);color:var(--_color-type-primary);max-width:1024px;margin-inline:auto;display:flex;flex-direction:column;min-height:100dvh;padding-inline:var(--s0)}a{color:var(--_color-link-normal);text-underline-offset:.1em;text-decoration-thickness:.05em}a:visited{color:var(--_color-link-visited)}a:hover{color:var(--_color-link-hover)}a:active{color:var(--_color-link-active)}a.current{color:var(--_color-link-current)}a:has(svg){display:inline-flex;align-items:center;gap:var(--s-1)}h2{margin-block-end:var(--s-3)}main :first-child{margin-block-start:0}@media screen and (min-width: 768px){aside :first-child{margin-block-start:0}}@media screen and (min-width: 768px){.with-sidebar{display:flex;flex-wrap:wrap;gap:var(--s1)}.with-sidebar>aside{flex-basis:30%;flex-grow:1}.with-sidebar>main{flex-basis:0;flex-grow:999;min-inline-size:50%}}:is(header,footer) li{display:inline}:is(header,footer) li+li::before{content:" "}header{text-transform:uppercase;text-align:center;text-wrap:balance;line-height:1;font-family:impact,sans-serif}header *{margin:0}header a{text-decoration:none}header nav{font-size:var(--s1);margin-block:var(--s1)}header .current{text-decoration:underline}footer{margin-block-start:auto;text-align:center;text-wrap:balance}@media screen{.text-fit{--captured-length: initial;--support-sentinel: var(--captured-length, 9999px);display:flex;container-type:inline-size;text-wrap:initial}.text-fit>[aria-hidden]{visibility:hidden}.text-fit>:not([aria-hidden]){--captured-length: 100cqi;--available-space: var(--captured-length);flex-grow:1;container-type:inline-size}.text-fit>:not([aria-hidden])>*{--support-sentinel: inherit;--captured-length: 100cqi;--ratio: tan(atan2( var(--available-space), var(--available-space) - var(--captured-length) ));--font-size: clamp( 1em, 1em * var(--ratio), var(--max-font-size, infinity * 1px) - var(--support-sentinel) );inline-size:var(--available-space)}.text-fit>:not([aria-hidden])>*:not(.text-fit){display:block;font-size:var(--font-size)}@container (inline-size > 0){.text-fit>:not([aria-hidden])>*:not(.text-fit){white-space:nowrap}}.text-fit>:not([aria-hidden])>*.text-fit{--captured-length2: var(--font-size);font-variation-settings:"opsz" tan(atan2(var(--captured-length2),1px))}@property --captured-length{syntax:"<length>";initial-value:0px;inherits:true}@property --captured-length2{syntax:"<length>";initial-value:0px;inherits:true}}nav:has(ol,ul) ol,nav:has(ol,ul) ul{list-style:none;padding:0}nav:has(ol,ul) div{display:flex;align-items:baseline;gap:var(--s-2);line-height:1.5}nav:has(ol,ul) .leaders{flex-grow:1;border-bottom:2px dotted}nav:has(ol,ul) time{flex-shrink:0}nav:has(ol,ul) p{margin-block:0 var(--s-2)}</style><style>code{font-size:.9em}p>code{background:var(--_color-background-code)}div.highlight{overflow:scroll;background:var(--_color-background-code)}pre{margin-block:0;padding:var(--s-1);border-radius:3px;overflow-x:auto}</style></head><body class="page advent-of-code-2024---day-3"><header><h1 class=text-fit><span><a data-text="Greg Daynes" href="/">Greg Daynes</a></span><span aria-hidden=true style="visibility: hidden">Greg Daynes</span></h1><p class=text-fit><span><span>Full Stack Software Design, Development & Management</span></span><span aria-hidden=true style="visibility: hidden">Full Stack Software Design, Development & Management</span></p><nav><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/resume">Resume</a></li><li><a href="/projects">Projects</a></li><li><a href="/notebook">Notebook</a></li></ul></nav></header><div class=with-sidebar><main><article><h2>Advent of Code 2024 - Day 3</h2><ul id=markdown-toc><li><a href="#part-1" id=markdown-toc-part-1>Part 1</a></li><li><a href="#part-2" id=markdown-toc-part-2>Part 2</a></li></ul><p>Code for <a href="//github.com/gregdaynes/advent-of-code-2024/tree/day03">Day 03</a></p><p>Wow. After Day 2 pt 2, I was sure I’d be cooked and not be able to continue on. Oh how wrong Greg from a 4 hours ago was.</p><p>Today’s challenge involves filtering through “corrupted data” looking for recognizable operations and performing them.</p><p>I didn’t even bother with a separate file, instead wrote each solver in tests.</p><h4 id=part-1>Part 1</h4><p>For part 1 - the only operation needed is <code class="language-plaintext highlighter-rouge">mul(x,y)</code> - X and Y are numbers to multiply together. Then summing the product.</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class="nf">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">pt1 sample dataset</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="s2">`xmul(2,4)%&amp;mul[3,7]!@^do_not_mul(5,5)+mul(32,64]then(mul(11,8)mul(8,5))`</span>
  <span class="kd">const</span> <span class="nx">matcher</span> <span class="o">=</span> <span class="sr">/mul</span><span class="se">\((?&lt;</span><span class="sr">a&gt;</span><span class="se">\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">,</span><span class="se">(?&lt;</span><span class="sr">b&gt;</span><span class="se">\d</span><span class="sr">+</span><span class="se">)\)</span><span class="sr">/gm</span>
  <span class="kd">const</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nf">matchAll</span><span class="p">(</span><span class="nx">matcher</span><span class="p">)</span>

  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">match</span> <span class="k">of</span> <span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">groups</span>

    <span class="nx">sum</span> <span class="o">=</span> <span class="nx">sum</span> <span class="o">+</span> <span class="p">(</span><span class="nc">Number</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nc">Number</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">b</span><span class="p">))</span>
  <span class="p">}</span>

  <span class="nx">assert</span><span class="p">.</span><span class="nf">equal</span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span> <span class="mi">188192787</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div><p>If you know RegEx the solution is easy. We can use it to find the data to multiply together as groups and then iterate over the iterator collections adding up the multiplications.</p><h4 id=part-2>Part 2</h4><p>Part 2 introduced 2 new “uncorrupted” operations to pay attention to.</p><p><code class="language-plaintext highlighter-rouge">don't()</code> and <code class="language-plaintext highlighter-rouge">do()</code></p><p>They act as flags to disable and enable future operations.</p><p>The default state is to perform the operations</p><p>We can think in terms of <em>gating</em> or <em>switching</em> to understand the logic.</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class="nf">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">pt2 sample dataset</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="s2">`xmul(2,4)&amp;mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))`</span>

  <span class="kd">const</span> <span class="nx">matcher</span> <span class="o">=</span> <span class="sr">/</span><span class="se">(</span><span class="sr">mul</span><span class="se">\((?&lt;</span><span class="sr">a&gt;</span><span class="se">\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">,</span><span class="se">(?&lt;</span><span class="sr">b&gt;</span><span class="se">\d</span><span class="sr">+</span><span class="se">)\)</span><span class="sr">|</span><span class="se">(?&lt;</span><span class="sr">dont&gt;don't</span><span class="se">\(\))</span><span class="sr">|</span><span class="se">(?&lt;</span><span class="sr">do&gt;do</span><span class="se">\(\)))</span><span class="sr">/gm</span>
  <span class="kd">const</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nf">matchAll</span><span class="p">(</span><span class="nx">matcher</span><span class="p">)</span>

  <span class="kd">let</span> <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span>

  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">match</span> <span class="k">of</span> <span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">groups</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">dont</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">false</span>
      <span class="k">continue</span>
    <span class="p">}</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="k">do</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span>
      <span class="k">continue</span>
    <span class="p">}</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sum</span> <span class="o">=</span> <span class="nx">sum</span> <span class="o">+</span> <span class="p">(</span><span class="nc">Number</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nc">Number</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">b</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">assert</span><span class="p">.</span><span class="nf">equal</span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span> <span class="mi">48</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div><p>An adjustment to the RegEx from Part 1 is needed</p><ol><li>Wrapping the whole matcher in a group</li><li>Use <code class="language-plaintext highlighter-rouge">|</code> to define alternate group matchers for <code class="language-plaintext highlighter-rouge">don't()</code> and <code class="language-plaintext highlighter-rouge">do()</code></li></ol><p>This gives a Regex pattern that has 3 possible matches for the group.</p><p>Once the matcher is run against the input, the output is an iterator with each group in sequence. Meaning there will be either a <code class="language-plaintext highlighter-rouge">mul</code>, <code class="language-plaintext highlighter-rouge">don't()</code>, <code class="language-plaintext highlighter-rouge">do()</code> in each step of the iterator, sequentially matching the input.</p><ol><li>Starting with <code class="language-plaintext highlighter-rouge">mul</code> enabled</li><li>Step through each match</li><li>If enabled === <code class="language-plaintext highlighter-rouge">true</code> and the match is <code class="language-plaintext highlighter-rouge">mul</code> - perform multiplication and add the product to the sum</li><li>If the match is <code class="language-plaintext highlighter-rouge">don't()</code> set enabled to false</li><li>If the match is <code class="language-plaintext highlighter-rouge">do</code> set enabled to true</li></ol><hr/><p>This code is <em>easy</em> enough to understand without much documentation on the operations that someone without regex experience should be able to understand and alter (assuming they do not look at the matcher). However the regex itself is also easy to understand, that a quick visit to <a href="//regex101.com/r/Km0QEM/1">Regex101</a> will describe it in detail and provide a playground to test against.</p><p>Overall, I feel relieved and elated that Day 3 challenge wasn’t such a struggle as Day 2.</p><p>Takeaway from today</p><p><strong>ALWAYS BET ON REGEX</strong></p><p>(unless to parse email, then avoid.)</p></article></main><aside><h2>Projects</h2><nav><ul><li class=""><a href="/project/2023/12/03/hyde-fonts.html"> Hyde Fonts</a></li><li class=""><a href="/project/2018/04/07/project-hyde.html"> Project Hyde</a></li><li class=""><a href="/project/2025/06/08/earthquakes.html"> Earthquakes with Leaflet.js & Go</a></li><li class=""><a href="/project/2023/11/11/turing-pi.html"> Turing Pi</a></li></ul></nav><a href="/projects">More Projects</a><h2>Notes</h2><nav><ul><li class=""><a href="/note/2024/07/30/callable-class-instance.html"> Callable Class Instance</a></li><li class=""><a href="/note/2024/07/29/web-components.html"> Web Components</a></li><li class=""><a href="/note/2024/02/10/hexdump-shell-command.html"> Hexdump shell command</a></li><li class=""><a href="/note/2023/12/08/fixing-homebrew-permissions.html"> Fixing Homebrew permissions when using ASDF</a></li><li class=""><a href="/note/2021/09/18/node-binary-artifacts.html"> Node CLI / Binary Artifacts</a></li></ul></nav><a href="/notebook">More Notes</a></aside></div><footer><p>©2024 Gregory Daynes</p><nav><ul><li><a href="mailto:email@gregdaynes.com">Contact</a></li><li><a href="/privacy.txt">Privacy</a></li><li><a href="/humans.txt">Humans</a></li><li><a href="/robots.txt">Robots</a></li><li><a href="/sitemap.xml">Site Map</a></li><li><a href="/feed.xml">RSS</a></li></ul></nav><p><small>Content on this site is licensed under Creative Common Attribution-ShareAlike 4.0 International License. All code content is licensed under the MIT license, unless an excerpt from a larger work under another license.</small></p></footer></body></html>