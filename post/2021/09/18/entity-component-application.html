<!DOCTYPE html><html lang=en-GB><head><meta name=viewport content="width=device-width, initial-scale=1"><meta name=keywords content=""><meta name=no-email-collection content="/privacy.txt"><meta name=twitter:card content=summary_large_image><meta property=og:title content="Composability with Entity-Component Systems • Greg Daynes"><meta property="og:description" name=description content="The website and home of Gregory Daynes. Find links to projects, notebooks, and resume."><meta property="og:image" content="data:;base64,iVBORw0KGgo="><title>Composability with Entity-Component Systems • Greg Daynes</title><link rel=me href="//mastodon.social/@gregdaynes"><link rel=author href="/humans.txt"><link rel=icon href="data:;base64,iVBORw0KGgo="><link type="application/atom+xml" rel=alternate href="/feed.xml"><link rel=stylesheet href="/assets/css/variables-critical-text-fit-toc-list-88113d.css"><style>code{font-size:.9em}p>code{background:var(--_color-background-code)}div.highlight{overflow:scroll;background:var(--_color-background-code)}pre{margin-block:0;padding:var(--s-1);border-radius:3px;overflow-x:auto}.footnotes p{margin-block-end:0}blockquote{border-inline-start:4px solid;padding-inline-start:1rem;margin-inline:auto;font-weight:bold;font-style:italic}</style></head><body class="page composability-with-entity-component-systems"><img src="//analytics.app.gregdaynes.com?type=image&page=/post/2021/09/18/entity-component-application.html" width=0 height=0 /><header><h1 class=text-fit><span><a data-text="Greg Daynes" href="/">Greg Daynes</a></span><span aria-hidden=true style="visibility: hidden">Greg Daynes</span></h1><p class=text-fit><span><span>Full Stack Software Design, Development & Management</span></span><span aria-hidden=true style="visibility: hidden">Full Stack Software Design, Development & Management</span></p><nav><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/resume">Resume</a></li><li><a href="/projects">Projects</a></li><li><a href="/notebook">Notebook</a></li></ul></nav></header><div class=with-sidebar><main><article><h2>Composability with Entity-Component Systems</h2><p>This was an exploration of Entity-Component System pattern used in game development. I wanted to see if the pattern could help with legibility and composability.</p><p>Repo: <a href="//github.com/gregdaynes/entity-component">gregdaynes/entity-component</a></p><div class="language-sh highlighter-rouge"><div class=highlight><pre class=highlight><code><span class="c"># Run application, stdout JSON data results</span>
<span class="nv">$ </span>npm start

<span class="c"># Run application with profiling data, stdout pretty JSON data &amp; performance metrics/telemetry</span>
<span class="nv">$ </span>npm run profile
</code></pre></div></div><p>While not as performant as the original implementation. EC proved to be a happy in-between performance and maintainability. I found it to be like <a href="/function-composition">Function Composition</a> as well as way more memory efficient (this is where EC proves its value).</p><p>The concept is for entities to act as containers of data with a global unique identifier. The logic exists outside of the entities in systems. Each system operates on entities which have the components the system knows about. Usually a system performs arithmetic, which makes it fast and efficient.</p><p>This served as a place to experiment with the new <a href="//nodejs.org/dist/latest-v16.x/docs/api/perf_hooks.html#perf_hooks_performance_measurement_apis">Performance Hooks</a> API.</p><ul><li>Choosing to write this using Classes instead of Prototype, I found it to be more legible. Programmers coming from OOP languages like Ruby makes this easier to understand.</li><li>For/of loops and if/else blocks are also used instead of collection methods like map/reduce. Ease for programmers of all levels to understand without Javascript collections knowledge. And keep me away from long method chains.</li><li>Main loop which performs 100,000 frames (iterations) of systems over the entities - <a href="//github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/index.js#L60-L75">link</a></li><li>Entity factory shows creation of entities with their components- <a href="//github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/factory-ship.js">link</a></li><li>Customizing entities with more components - <a href="//github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/index.js#L43-L50">link</a></li><li>Entity Manager which maintains collections of entities and their components - <a href="//github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/lib/entity-manager.js">link</a></li><li>Wrapper for perf hooks - <a href="//github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/lib/perf.js">link</a></li></ul><p>I’m still exploring the posibile applications of an EC-like pattern outside of games.</p></article></main><aside><h2>Projects</h2><nav><ul><li class=""><a href="/project/2023/12/28/fellow-stagg-repair.html"> Fellow Stagg Repair</a></li><li class=""><a href="/project/2018/04/07/project-hyde.html"> Project Hyde</a></li><li class=""><a href="/project/2025/06/08/earthquakes.html"> Earthquakes with Leaflet.js & Go</a></li><li class=""><a href="/project/2023/12/04/hyde-page-css-js.html"> Hyde Page CSS & JS</a></li></ul></nav><a href="/projects">More Projects</a><h2>Notes</h2><nav><ul><li class=""><a href="/note/2024/07/30/callable-class-instance.html"> Callable Class Instance</a></li><li class=""><a href="/note/2024/07/29/web-components.html"> Web Components</a></li><li class=""><a href="/note/2024/02/10/hexdump-shell-command.html"> Hexdump shell command</a></li><li class=""><a href="/note/2023/12/08/fixing-homebrew-permissions.html"> Fixing Homebrew permissions when using ASDF</a></li><li class=""><a href="/note/2021/09/18/node-binary-artifacts.html"> Node CLI / Binary Artifacts</a></li></ul></nav><a href="/notebook">More Notes</a></aside></div><footer><p>©2024 Gregory Daynes</p><nav><ul><li><a href="mailto:email@gregdaynes.com">Contact</a></li><li><a href="/privacy.txt">Privacy</a></li><li><a href="/humans.txt">Humans</a></li><li><a href="/robots.txt">Robots</a></li><li><a href="/sitemap.xml">Site Map</a></li><li><a href="/feed.xml">RSS</a></li><li><a href="/stats">Analytics</a></li></ul></nav><p><small>Content on this site is licensed under Creative Common Attribution-ShareAlike 4.0 International License. All code content is licensed under the MIT license, unless an excerpt from a larger work under another license.</small></p></footer></body></html>