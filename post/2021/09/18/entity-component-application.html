<!DOCTYPE html> <!-- Greg Daynes by Gregory Daynes URL: https://gregdaynes.com --> <html lang="en-GB"> <head> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Composability with Entity-Component Systems | Greg Daynes</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Composability with Entity-Component Systems" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This was an exploration of Entity-Component System pattern used in game development. I wanted to see if the pattern could help with legibility and composability." /> <meta property="og:description" content="This was an exploration of Entity-Component System pattern used in game development. I wanted to see if the pattern could help with legibility and composability." /> <link rel="canonical" href="https://gregdaynes.com/post/2021/09/18/entity-component-application.html" /> <meta property="og:url" content="https://gregdaynes.com/post/2021/09/18/entity-component-application.html" /> <meta property="og:site_name" content="Greg Daynes" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2021-09-18T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Composability with Entity-Component Systems" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-09-18T00:00:00+00:00","datePublished":"2021-09-18T00:00:00+00:00","description":"This was an exploration of Entity-Component System pattern used in game development. I wanted to see if the pattern could help with legibility and composability.","headline":"Composability with Entity-Component Systems","mainEntityOfPage":{"@type":"WebPage","@id":"https://gregdaynes.com/post/2021/09/18/entity-component-application.html"},"url":"https://gregdaynes.com/post/2021/09/18/entity-component-application.html"}</script> <!-- End Jekyll SEO tag --> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="page-datetime" content=""> <meta name="author" content="/humans.txt"> <meta name="keywords" content=""> <meta name="no-email-collection" content="/privacy.txt"> <meta name="description" content="The website and home of Gregory Daynes. Find links to projects, notebooks, and resume."> <meta name='HandheldFriendly' content='True'> <meta name='MobileOptimized' content='375'> <title>Composability with Entity-Component Systems &bull; Greg Daynes</title> <style> :root{--ratio: 1.5;--s-5: calc(var(--s-4) / var(--ratio));--s-4: calc(var(--s-3) / var(--ratio));--s-3: calc(var(--s-2) / var(--ratio));--s-2: calc(var(--s-1) / var(--ratio));--s-1: calc(var(--s0) / var(--ratio));--s0: 1rem;--s1: calc(var(--s0) * var(--ratio));--s2: calc(var(--s1) * var(--ratio));--s3: calc(var(--s2) * var(--ratio));--s4: calc(var(--s3) * var(--ratio));--s5: calc(var(--s4) * var(--ratio));--_color-type-primary: black;--_color-type-secondary: silver;--_color-type-highlight: magenta;--_color-decoration-primary: black;--_color-decoration-shadow: black;--_color-background-primary: white;--_color-background-secondary: lightgray;--_color-link-normal: blue;--_color-link-hover: magenta;--_color-link-active: cyan;--_color-link-visited: blue;--_color-link-current: magenta;--_width-aside: 350px}@media(prefers-color-scheme: dark){:root{--_color-type-primary: white;--_color-background-primary: black;--_color-link-normal: dodgerblue;--_color-link-hover: magenta;--_color-link-active: cyan;--_color-link-visited: dodgerblue;--_color-link-current: magenta;--_color-decoration-primary: white;--_color-background-secondary: dimgray;--_color-decoration-shadow: dimgray}}/*! modern-normalize v2.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize *//*! Font stacks by Chris Coyier | https://css-tricks.com/snippets/css/font-stacks/ */:root{font-size:100%;line-height:1.5;font-family:"Segoe UI",Candara,"Bitstream Vera Sans","DejaVu Sans","Bitstream Vera Sans","Trebuchet MS",Verdana,"Verdana Ref",sans-serif}@media(min-width: 768px){:root{font-size:clamp(1rem,1.125rem,4dvw)}}*{margin:0}*,*::before,*::after{box-sizing:border-box}*:focus{outline-width:thin;outline-style:solid;outline-offset:var(--s-3)}html{font-weight:normal;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{background-color:var(--_color-background-primary);color:var(--_color-type-primary);max-width:1024px;margin-inline:auto;display:flex;flex-direction:column;min-height:100dvh;padding:var(--s1);gap:var(--s1)}hr{height:unset;color:inherit;border:none;background-color:var(--_color-background-secondary)}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace;font-size:1rem}small{font-size:.8em}sub,sup{font-size:.75em;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{display:block;max-inline-size:100%}ul,ol{padding-inline-start:2ch}a{text-decoration:underline;text-underline-offset:.25rem;text-decoration-style:dotted;color:var(--_color-link-normal)}a:visited{color:var(--_color-link-visited)}a:hover{color:var(--_color-link-hover)}a:active{color:var(--_color-link-active)}a.current{color:var(--_color-link-current)}a:has(svg){display:inline-flex;align-items:center;gap:.5rem}a:has(svg) svg{opacity:.75}.main-wrapper{flex:1 1;display:flex;gap:var(--s1);flex-wrap:wrap;flex-direction:column;margin-inline:auto}@media(min-width: 768px){.main-wrapper{flex-direction:row}}main{flex-grow:1;flex-shrink:1;flex-basis:calc(66.6666666667% - var(--s1)/2)}aside{flex-grow:1;flex-shrink:1;flex-basis:calc(33.3333333333% - var(--s1)/2)}.banner{width:100%;display:inline-flex;gap:var(--s-2);line-height:1;text-transform:uppercase;font-size:1rem}.banner hr{flex:1;display:inline-block}.stack{display:flex;flex-direction:column;gap:var(--s1)}.stack .stack{gap:var(--s0)}.stack .stack .stack{gap:var(--s-2)}.more{font-weight:bold;text-transform:uppercase;float:right}header,footer{line-height:1;display:flex}header nav,footer nav{display:flex;justify-content:center;flex-wrap:wrap;gap:var(--s-1)}header{font-family:Impact,Haettenschweiler,"Franklin Gothic Bold",Charcoal,"Helvetica Inserat","Bitstream Vera Sans Bold","Arial Black",sans-serif;flex-direction:column;text-transform:uppercase;text-align:center;gap:var(--s1)}header h1{font-size:clamp(1rem,10rem,16dvw);line-height:.9}header h2{font-size:clamp(1rem,2rem,8dvw)}header nav{font-size:clamp(1rem,1.375rem,4dvw)}header a{text-decoration:none;font-weight:bold}header a.current{text-decoration:underline}footer{text-align:center;gap:var(--s-1);flex-wrap:wrap;justify-content:center}footer p{opacity:.5}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(100%);height:1px;overflow:hidden;position:absolute;width:1px;white-space:nowrap}.toc-list{width:100%;list-style-type:none;padding:0}.toc-list li>.row{text-decoration:none;display:grid;grid-template-columns:auto max-content;align-items:end}.toc-list li>.row>.page{text-align:right;font-family:monospace;padding-inline-start:.5ch}.toc-list li>.row>.title{position:relative;overflow:hidden}.toc-list li>.row .leaders::after{position:absolute;content:". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . " ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . " ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . " ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";text-align:right}.toc-list li>.row:has(a:focus){outline-width:thin;outline-style:solid;outline-offset:var(--s-3);outline-color:currentColor}.toc-list li>.row:has(a:focus) a:focus{outline:none}.toc-list li{margin-block-end:var(--s-2)}.card{text-align:center;padding:var(--s-3);outline:1px solid;font-weight:bold;text-decoration:none;line-height:1;font-size:1rem} </style> <link rel="stylesheet" href="/assets/css/677894.css"> <link rel="author" href="/humans.txt" /> <link rel="me" href="https://mastodon.social/@gregdaynes" /> <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg"> <link rel="icon" type="image/png" href="/assets/images/favicon.png"> <link type="application/atom+xml" rel="alternate" href="https://gregdaynes.com/feed.xml" title="Greg Daynes" /> <link rel="shortcut icon" href="/assets/img/favicon-32x32.png" /> <body class="page composability-with-entity-component-systems"> <header> <hgroup> <h1><a href="/">Greg Daynes</a></h1> <h2>Full Stack Software Design, Development & Management</h2> </hgroup> <nav> <a href="/">Home</a> <a href="/about">About</a> <a href="/resume">Resume</a> <a href="/projects">Projects</a> <a href="/notebook">Notebook</a> </nav> </header> <div class="main-wrapper"> <main class="stack"> <article> <h2 class="banner">Composability with Entity-Component Systems <hr></h2> <p>This was an exploration of Entity-Component System pattern used in game development. I wanted to see if the pattern could help with legibility and composability.</p> <p>Repo: <a href="https://github.com/gregdaynes/entity-component">gregdaynes/entity-component</a></p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Run application, stdout JSON data results</span>
<span class="nv">$ </span>npm start

<span class="c"># Run application with profiling data, stdout pretty JSON data &amp; performance metrics/telemetry</span>
<span class="nv">$ </span>npm run profile
</code></pre></div></div> <p>While not as performant as the original implementation. EC proved to be a happy in-between performance and maintainability. I found it to be like <a href="/function-composition">Function Composition</a> as well as way more memory efficient (this is where EC proves it’s value).</p> <p>The concept is for entites to act as containers of data with a global unique dentifier. The logic exists outside of the entities in systems. Each system operates on entities which have the components the system knows about. Usually a system performs arithmetic, which makes it fast and efficient.</p> <p>This served as a place to experiment with the new <a href="https://nodejs.org/dist/latest-v16.x/docs/api/perf_hooks.html#perf_hooks_performance_measurement_apis">Performance Hooks</a> API.</p> <ul> <li>Choosing to write this using Classes instead of Prototype, I found it to be more legible. Programmers coming from OOP languages like Ruby makes this easier to understand.</li> <li>For/of loops and if/else blocks are also used instead of collection methods like map/reduce. Ease for programmers of all levels to understand without Javascript collections knowledge. And keep me away from long method chains.</li> <li>Main loop which performs 100,000 frames (iterations) of systems over the entities - <a href="https://github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/index.js#L60-L75">link</a></li> <li>Entity factory shows creation of entities with their components- <a href="https://github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/factory-ship.js">link</a></li> <li>Customizing entities with more components - <a href="https://github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/index.js#L43-L50">link</a></li> <li>Entity Manager which maintains collections of entities and their components - <a href="https://github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/lib/entity-manager.js">link</a></li> <li>Wrapper for perf hooks - <a href="https://github.com/gregdaynes/entity-component/blob/5a859c67f7e9ce161e10daefd38dd6d43378f8de/src/lib/perf.js">link</a></li> </ul> <p>I’m still exploring the posibile applications of an EC-like pattern outside of games.</p> </article> </main> <aside class="stack"> <section class="stack"> <h2 class="banner">Projects <hr></h2> <div class="stack"> <a class="card" href="/project/2023/12/04/hyde-page-css-js.html">Hyde Page CSS & JS</a> <a class="card" href="/project/2023/12/22/hyde-decap.html">Hyde Decap</a> <a class="card" href="/project/2023/12/03/hyde-fonts.html">Hyde Fonts</a> <a class="card" href="/project/2023/11/11/turing-pi.html">Turing Pi</a> </div> <span><a class="more" href="/projects">More Projects</a></span> </section> <section class="stack"> <h2 class="banner">Notes <hr></h2> <ol class="toc-list"> <li> <span class="row"> <span class="title"> <a href="/note/2023/12/08/fixing-homebrew-permissions.html">Fixing Hombrew permissions when using ASDF</a> </span> </span> </li> <li> <span class="row"> <span class="title"> <a href="/note/2021/09/18/node-binary-artifacts.html">Node CLI / Binary Artifacts</a> </span> </span> </li> </ol> <span><a class="more" href="/notebook">More Notes</a></span> </section> </aside> </div> <footer> <div>©2024 Gregory Daynes</div> <nav> <a href="mailto:email@gregdaynes.com">Contact</a> <a href="/privacy.txt">Privacy</a> <a href="/humans.txt">Humans</a> <a href="/robots.txt">Robots</a> <a href="/sitemap.xml">Site Map</a> <a href="/feed.xml">RSS</a> </nav> <p><small>Content on this site is licensed under Creative Common Attribution-ShareAlike 4.0 International License. All code content is licensed under the MIT license, unless an excerpt from a larger work under another license.</small></p> </footer> <script src="/assets/js/63fae9.js"></script> </body> </html>
